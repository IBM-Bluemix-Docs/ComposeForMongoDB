---
copyright:
  years: 2016,2018
lastupdated: "2018-06-11"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}

# 아키텍처 
{: #architecture}

## 복제

{{site.data.keyword.composeForMongoDB_full}} 서비스에는 단일 샤드로 구성된 세 개의 데이터 노드 복제본 세트가 포함되어 있습니다. 서비스가 배치되는 영역을 선택하면 세 개의 데이터 노드가 영역의 가용성 구역에 분산되고 데이터가 세 개의 노드 전체에 복제됩니다. MongoDB에서 모든 쓰기 오퍼레이션을 1차 데이터 노드로 푸시한 다음, 샤드에 있는 2차 데이터 노드로 (oplog를 통해) 전파합니다. 1차 노드에 실패하면 2차 노드가 1차로 승격됩니다. 한 데이터 멤버에 연결할 수 없게 되어도 MongoDB 샤드는 계속 정상적으로 작동합니다.

## 디스크 암호화

모든 {{site.data.keyword.composeForMongoDB}} 서비스의 암호화는 사용되지 않습니다. 데이터는 볼륨 레벨 암호화가 사용된 서버에 있습니다. 

{{site.data.keyword.composeForMongoDB}}은 관리 서비스이므로 {{site.data.keyword.cloud}} Compose 운영자가 데이터를 볼 수 있습니다. 디스크 암호화 외에도, 데이터베이스에 개인 정보를 저장하는 경우 저장하기 전이나 데이터베이스 자체에서 암호화를 사용하는 기능 또는 확장기능을 사용하여 정보를 암호화하는 것이 좋습니다. 해당 메소드는 사용성이나 성능에 영향을 미칠 수 있지만 암호화를 통해 개인 정보를 보호하는 것이 좋습니다.

## Auto-Scaling

리소스는 MongoDB 데이터베이스의 총 디스크 스토리지 사용을 기반으로 자동으로 스케일링됩니다. 메모리는 1:4로 프로비저닝된 디스크의 비율을 기반으로 합니다. 해당 리소스는 단위로 번들됩니다.

Auto-Scaling은 데이터베이스의 중단기 상태동향에 대응하도록 설계되었습니다. 매시간 서비스를 확인하고 디스크 공간이 부족하면 더 많은 단위가 배치에 할당됩니다. 

Auto-Scaling에서는 디스크/메모리 사용량이 줄어든 배치의 스케일은 줄이지 않습니다. 데이터베이스에 프로비저닝된 리소스는 나중에 필요한 경우를 대비하여 그대로 남아 있거나 배치의 스케일을 수동으로 축소할 때까지 그대로 남아 있습니다.
{: .tip}

## Admin 데이터베이스

Admin 데이터베이스에 데이터를 저장하면 성능이 저하되고 데이터가 유실될 위험이 있습니다.

다른 MongoDB 설치와 같이 {{site.data.keyword.composeForMongoDB}}에는 Admin 데이터베이스가 있습니다. Admin 데이터베이스에는 다양한 추적 콜렉션과 함께 데이터베이스 내의 사용자 및 역할에 대한 정보가 들어 있습니다. 단순 MongoDB 설치에서는 다른 데이터와 함께 데이터베이스에 저장됩니다. 

{{site.data.keyword.composeForMongoDB}}에서는 MongoDB의 샤드 아키텍처를 사용하는 복원력이 향상된 아키텍처가 제공됩니다. 여기에는 샤드 간의 관리 데이터 공유가 포함됩니다. Admin 데이터베이스를 포함하는 다른 데이터베이스 클러스터를 작성하여 이를 수행할 수 있습니다.

이 클러스터 Admin 데이터베이스는 스케일에 맞게 빌드되지 않으며 저장되는 데이터의 양에 따라 급격하게 성능이 저하됩니다. 따라서 애플리케이션이 Admin 데이터베이스에 데이터를 쓰지 않도록 해야 합니다.
